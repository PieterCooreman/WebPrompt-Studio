<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>WebPrompt Studio - AI Website Prompt Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f8f9fa;
        }
        
        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 80px 0 60px 0;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.15"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .theme-selector {
            margin-bottom: 15px;
        }
        
        .theme-badge {
            font-size: 0.8rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        /* Main content */
        .main-content {
            padding: 60px 0;
            min-height: 70vh;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .suggestion-select {
            width: auto;
            flex: 0 0 200px;
        }
        
        #json-output {
            height: 350px;
            font-family: monospace;
            font-size: 0.9rem;
            resize: vertical;
        }
        
        .form-container {
            height: 600px;
            overflow-y: auto;
        }
        
        .json-container {
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            height: 600px;
            display: flex;
            flex-direction: column;
        }
        
        .form-input {
            min-height: 38px;
        }
        
        .btn-group-sm .btn {
            font-size: 0.8rem;
        }
        
        .card-4 {
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .card-body-4 {
            flex-grow: 1;
            overflow-y: auto;
        }
        
        .preview-textarea {
            height: 200px;
            resize: vertical;
        }
        
        .modal-fullscreen .modal-content {
            height: 100%;
        }
        
        /* Footer */
        .footer {
            background-color: #343a40;
            color: white;
            padding: 40px 0 20px 0;
        }
        
        .footer h5, .footer h6, .footer p {
            color: white;
        }
        
        .footer a {
            color: #adb5bd;
            text-decoration: none;
        }
        
        .footer a:hover {
            color: white;
        }
        
        .footer .text-muted {
            color: #adb5bd !important;
        }
        
        /* Navbar brand enhancement */
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
        
        @media (max-width: 991px) {
            .hero-section {
                padding: 60px 0 40px 0;
            }
            
            .main-content {
                padding: 40px 0;
            }
            
            .form-container, .json-container, .card-4 {
                margin-bottom: 20px;
                height: auto;
            }
            
            #json-output {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- Bootstrap Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-code-square me-2"></i>WebPrompt Studio
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="ms-auto d-flex">
                    <button type="button" class="btn btn-outline-light btn-sm me-2" id="generate-random" title="Generate random themed values">
                        <i class="bi bi-shuffle"></i> Random Theme
                    </button>
                    <button type="button" class="btn btn-outline-light btn-sm me-2" id="clear-form" title="Clear all fields">
                        <i class="bi bi-eraser"></i> Clear Form
                    </button>
                    <a href="https://github.com/PieterCooreman/WebPrompt-Studio" class="btn btn-outline-light btn-sm" target="_blank" title="View on GitHub">
                        <i class="bi bi-github"></i> GitHub
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" id="builder">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center hero-content">
                    <h1 class="display-4 fw-bold mb-4">WebPrompt Studio</h1>
                    <p class="lead mb-4">
                        Build better websites with AI. Answer a few questions about your brand and goals, then get a proven prompt template that creates professional sites instantly.
                    </p>
                    
                    <div class="theme-selector mt-4">
                        <h5 class="fw-bold mb-3">Theme Clusters:</h5>
                        <div id="theme-badges" class="bg-white bg-opacity-10 p-4 rounded-3 backdrop-blur"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="main-content">
        <div class="container">
            <div class="row g-4">
                <!-- Left Column: Form -->
                <div class="col-lg-6">
                    <div class="card shadow-sm card-4">
                        <div class="card-header bg-dark text-white">
                            <h5 class="mb-0"><i class="bi bi-pencil-square me-2"></i>Step 1: Provide General Information</h5>
                        </div>
                        <div class="card-body card-body-4" style="padding: 15px">
                            <form id="prompt-form">
                                <div class="form-section">
                                    <h6 class="border-bottom pb-2 mb-3 text-primary">General Information</h6>
                                   <div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="sitetitle" placeholder="">
											<label for="sitetitle">Title</label>
										</div>
										<select class="form-select suggestion-select" onchange="this.closest('.input-group').querySelector('input').value = this.value; updateJsonOutput();">
											<option value="">Suggestion</option>
											</select>
									</div>
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="siteslogan" placeholder="">
											<label for="sitetitle">Slogan</label>
										</div>
										<select class="form-select suggestion-select" onchange="this.closest('.input-group').querySelector('input').value = this.value; updateJsonOutput();">
											<option value="">Suggestion</option>
											</select>
									</div>            

									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="sitelanguage" placeholder="">
											<label for="sitelanguage">Language</label>
										</div>                                    
										<select class="form-select suggestion-select-n" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
											<option value="">Suggestion</option>
											<option value="English">English</option>
											<option value="Nederlands">Nederlands</option>
											<option value="Français">Français</option>
											<option value="Deutsch">Deutsch</option>
											<option value="Español">Español</option>
											<option value="Português">Português</option>
											<option value="中文">中文</option>
											<option value="العربية">العربية</option>
										</select>                                        
                                    </div>
									
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="contact_details" placeholder="">
											<label for="contact_details">Contact Details</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>
                                </div>
								<div class="form-section">
                                    <h6 class="border-bottom pb-2 mb-3 text-primary">Context & Brand Identity</h6>
								
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="sector_activity" placeholder="">
											<label for="sector_activity">Sector/Activity</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>    

									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="target_audience" placeholder="">
											<label for="target_audience">Target Audience</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>   
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="mission" placeholder="">
											<label for="mission">Mission</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div> 
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="vision" placeholder="">
											<label for="vision">Vision</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div> 
									
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="core_values" placeholder="">
											<label for="core_values">Core Values</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>                                                                         
                                    
                                    
                                    
                                </div>
                                
                                <div class="form-section">
                                    <h6 class="border-bottom pb-2 mb-3 text-primary">Design</h6>
									
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="style_preference" placeholder="">
											<label for="style_preference">Style Preference</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>								
									
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="colors" placeholder="">
											<label for="colors">Colors</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>
									
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="typography" placeholder="">
											<label for="typography">Typography</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>
									
									
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="button_style" placeholder="">
											<label for="button_style">Button Style</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>
									
									
									<div class="input-group mb-3">
										<div class="form-floating">
											<input type="text" class="form-control form-input" id="tone_of_voice" placeholder="">
											<label for="tone_of_voice">Tone of Voice</label>
										</div>
                                        <select class="form-select suggestion-select" onchange="this.parentElement.querySelector('input').value = this.value; updateJsonOutput();">
                                                <option value="">Suggestion</option>
                                            </select>                                        
                                    </div>                                 
                                    
                                    
                                    
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Right Column: JSON Output and Preview -->
                <div class="col-lg-6">
                    <div class="row g-4">
                        <!-- JSON Output Card -->
                        <div class="col-12">
                            <div class="card shadow-sm">
                                <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0"><i class="bi bi-code me-2"></i>Step 2: Copy/paste JSON Prompt in any GenAI</h5>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button class="btn btn-outline-info" id="copy-json" title="Copy to clipboard">
                                            <i class="bi bi-copy text-white"></i>
                                        </button>
                                        <button class="btn btn-outline-info" id="export-json" title="Download as file">
                                            <i class="bi bi-download text-white"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body p-0">
                                    <textarea class="form-control border-0 rounded-0" id="json-output" readonly placeholder="Fill in the form to generate JSON..."></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Preview Card -->
                        <div class="col-12" id="preview">
                            <div class="card shadow-sm">
                                <div class="card-header bg-dark text-white">
                                    <h5 class="mb-0"><i class="bi bi-display me-2"></i>Step 3: Paste AI-generated HTML, preview, edit and download!</h5>
                                </div>
                                <div class="card-body">
                                    <p class="small text-muted mb-2">Paste the complete <code>HTML</code> returned by the AI engine to see a live preview.</p>
                                    <textarea id="ai-html-input" class="form-control preview-textarea mb-3" placeholder="Paste generated HTML here..."></textarea>
                                    <div class="d-grid gap-2">
                                        <button id="preview-btn" class="btn btn-primary">
                                            <i class="bi bi-display"></i> Preview, edit & download
                                        </button>
                                        <button id="download-btn" class="btn btn-success">
                                            <i class="bi bi-download"></i> Download
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h5><i class="bi bi-code-square me-2"></i>WebPrompt Studio</h5>
                    <p class="text-muted">Create stunning websites with the power of AI. Build structured prompts that generate professional web content in seconds.</p>
                </div>
               
				<!--
                <div class="col-md-3">
                    <h6>Follow</h6>
                    <div class="d-flex gap-2">
                        <a href="#" class="btn btn-outline-light btn-sm">
                            <i class="bi bi-github"></i>
                        </a>
                        <a href="#" class="btn btn-outline-light btn-sm">
                            <i class="bi bi-twitter"></i>
                        </a>
                        <a href="#" class="btn btn-outline-light btn-sm">
                            <i class="bi bi-linkedin"></i>
                        </a>
                    </div>
                </div>
				-->
            </div>
            <hr class="my-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 text-muted small">&copy; 2025 WebPrompt Studio. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0 text-muted small">Built with Bootstrap and love ❤️</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal for Preview -->
    <div class="modal fade" id="previewModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Live Preview (Editable)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <iframe id="preview-iframe" style="border:0;width:100%;height:100%;"></iframe>
                </div>
                <div class="modal-footer">
                    <small class="text-muted me-auto">You can click directly on the texts in the preview to edit them.</small>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="download-edited-btn">
                        <i class="bi bi-download"></i> Download Edited HTML
                    </button>
                </div>
            </div>
        </div>
    </div>    

    <script>
        const jsonTemplate = {
			"instructions": "Build a responsive one-page website in a single HTML file with inline CSS and JavaScript. Use Bootstrap 5 and follow all requirements below.",
			"output": "index.html (complete file with <style> and <script> sections)",
            "site_info": {
                "sitetitle": "[SITETITLE]",
                "siteslogan": "[SITESLOGAN]",
                "sitelanguage": "[SITELANGUAGE]",
                "contact_details": "[CONTACT_DETAILS]"
            },
            "context_and_brand_identity": {
                "sector_activity": "[SECTOR_ACTIVITY]",
                "target_audience": "[TARGET_AUDIENCE]",
                "mission": "[MISSION]",
                "vision": "[VISION]",
                "core_values": "[CORE_VALUES]"
            },
            "design": {
                "style_preference": "[STYLE_PREFERENCE]",
                "colors": "[COLORS]",
                "typography": "[TYPOGRAPHY]",
                "button_style": "[BUTTON_STYLE]",
                "favicon": "Generate a matching favicon embedded as a base64 PNG",
                "header_behavior": "Full-width. Use CSS position: fixed (not sticky) with top:0 and an appropriate z-index (≥ 1000) so that the header ALWAYS remains visible, even on long scroll."
            },
            "accessibility_and_readability": {
				"min_font_size": "16px body, 22px headings",
				"line_height": "1.5 minimum for body text",
				"contrast": "4.5:1 minimum (WCAG AA) for both light and dark modes",
				"glassmorphism": "Add glassmorphism effect to texts on a background image",
				"aria": "Full ARIA labels for navigation, alt text for all images",
				"keyboard": "Ensure all interactive elements are keyboard accessible"
			  },
            "icons": {
                "required_library": "Bootstrap Icons",
                "exact_cdn": "https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css",
                "implementation_rules": [
                    "Add <link rel='stylesheet' href='EXACT_CDN_URL' crossorigin='anonymous'> in <head>",
					"Omit the integrity and cross-origin attributes in the <link> and <script> tags. This prevents the browser from blocking the files if the hash is outdated.",
                    "Do NOT use inline SVG or data URIs"
                ]
            },
            "imagery_and_tone": {
                "tone_of_voice": "[TONE_OF_VOICE]"
            },
            "required_sections": [
				{
				  "name": "Header",
				  "specs": "Fixed (position: fixed, top: 0, z-index: 1000+), full-width, includes logo/brand, dark/light mode toggle, responsive hamburger menu for mobile"
				},
				{
				  "name": "Hero",
				  "specs": "Full-width with parallax background-attachment: fixed cover image, site title and slogan. Add a button that links to the about section (smooth scroll)."
				},
				{
				  "name": "About",
				  "specs": "Brief description aligned with mission and values (3-4 sentences)"
				},
				{
				  "name": "Photo Gallery",
				  "specs": "6 site-themed images in Bootstrap cards/grid, lightbox functionality (like GLightbox), lazy loading, hover shadow effects"
				},
				{
				  "name": "Call-to-Action",
				  "specs": "Prominent button/section guiding visitors to contact"
				},
				{
				  "name": "Contact",
				  "specs": "Contact details, embedded Google Maps (use public keyless embed URL)"
				},
				{
				  "name": "Footer",
				  "specs": "Social icons (Facebook, Instagram, YouTube using Bootstrap Icons), back-to-top button, copyright"
				}
			  ],
			"features": {
				"dark_mode": "Toggle button in header, stores preference in localStorage, switches between light/dark color schemes for entire page",
				"cookie_banner": "Simple custom banner at bottom of page (no external scripts), 'Accept' button stores choice in localStorage to hide on future visits, includes link to Privacy modal",
				"privacy_modal": "Bootstrap modal with basic privacy policy for technical cookies only",
				"animations": "Subtle fade/slide on scroll (use Intersection Observer API)",
				"smooth_scroll": "Enable for all anchor links",
				"hover_effects": "On buttons, links, and gallery images"
			  },
			  
			  "technical_requirements": {
				"bootstrap": "Use Bootstrap 5.x via CDN, utilize components (navbar, cards, buttons, modal, grid)",
				"cdn": "Omit the integrity and cross-origin attributes in the <link> and <script> tags. This prevents the browser from blocking the files if the hash is outdated.",
				"icons": "Bootstrap Icons 1.11.1+ via CDN: https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css",
				"lightbox": "Modern vanilla JS library (no jQuery) like GLightbox via CDN. Omit the integrity and cross-origin attributes.",
				"no_localstorage_api": "Store dark mode and cookie consent in localStorage",
				"code_quality": "Check element existence before manipulation, use modern ES6+ JavaScript, proper error handling",
				"browser_support": "Modern browsers (Chrome, Firefox, Safari, Edge - last 2 versions)"
			  },
			  
			  "assets": {
				"images": "Use royalty-free site-themed images from Unsplash/Pexels/Pixabay. Every <img> must include: onerror=\"this.onerror=null;this.src='https://placehold.co/600x400?text=Image+Placeholder'\"",
				"videos": "use 2-3 embedded YouTube/Vimeo videos of site-themed content, OR use placeholder service like https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4. Make lazy loaded.",
				"no_broken_images": "All images must have fallback placeholders via onerror handler"
			  },
			  
			  "seo_basics": {
				"meta_description": "Include compelling meta description about the site theme",
				"open_graph": "Add basic OG tags for social sharing (title, description, image)",
				"semantic_html": "Use proper HTML5 semantic tags (header, nav, main, section, footer)"
			  },
			  
			  "performance": {
				"lazy_loading": "All images and videos below fold",
				"minimal_dependencies": "Only essential libraries via CDN",
				"optimized_css": "Avoid unused styles, use CSS custom properties for theming"
			  }
        };

        const thematicClusters = {
    "tech_startup": {
        "name": "Tech Startup",
        "color": "primary",
        "sitetitle": "The Innovation Hub",
        "siteslogan": "The future is now",
        "sitelanguage": "English",
        "contact_details": "1 Wall Street, New York, USA",
        "sector_activity": "Tech",
        "target_audience": "Tech enthusiasts",
        "mission": "To improve the world through innovation",
        "vision": "To lead innovation",
        "core_values": "Integrity, Innovation, Sustainability",
        "style_preference": "Modern minimalist",
        "colors": [
            "#0F172A (Slate Dark)",
            "#3B82F6 (Electric Blue)",
            "#60A5FA (Sky Blue)",
            "#E0E7FF (Indigo Light)",
            "#F8FAFC (Cool White)"
        ],
        "typography": "Modern tech: Poppins for headings and Inter for body text",
        "button_style": "Rounded corners with a subtle glow on hover",
        "tone_of_voice": "Direct and to the point"
    },
    "health_wellness": {
        "name": "Health & Wellness",
        "color": "success",
        "sitetitle": "Vital Life",
        "siteslogan": "Harmony for body and mind",
        "sitelanguage": "English",
        "contact_details": "25 Main Street, Utrecht, Netherlands",
        "sector_activity": "Healthcare",
        "target_audience": "Health-conscious individuals",
        "mission": "To empower people to reach their potential",
        "vision": "Health accessible to everyone",
        "core_values": "Sustainability, Innovation, Inclusivity",
        "style_preference": "Organic and natural",
        "colors": [
            "#A7D129 (Fresh Lime)",
            "#7FB77E (Sage Green)",
            "#F2E8C6 (Warm Cream)",
            "#FFFBE6 (Light Yellow)",
            "#E8F5E9 (Mint Cream)"
        ],
        "typography": "Soft and friendly: Quicksand for headings and Nunito for body text",
        "button_style": "Soft edges with a calm color transition on hover",
        "tone_of_voice": "Calm and reassuring"
    },
    "creative_agency": {
        "name": "Creative Agency",
        "color": "warning",
        "sitetitle": "Creative Souls",
        "siteslogan": "Where imagination comes to life",
        "sitelanguage": "English",
        "contact_details": "101 Champs-Élysées, Paris, France",
        "sector_activity": "Media & Entertainment",
        "target_audience": "Creatives",
        "mission": "To protect cultural heritage",
        "vision": "A world where technology is human",
        "core_values": "Passion, Growth, Result-oriented",
        "style_preference": "Bold and colorful",
        "colors": [
            "#FF6969 (Coral Red)",
            "#FFD93D (Vibrant Yellow)",
            "#6BCB77 (Fresh Green)",
            "#4D96FF (Sky Blue)",
            "#FFF5E0 (Cream White)"
        ],
        "typography": "Bold and creative: Bebas Neue for headings and Work Sans for body text",
        "button_style": "Gradient buttons with a dynamic drop shadow on hover",
        "tone_of_voice": "Playful and informal"
    },
    "financial_services": {
        "name": "Financial Services",
        "color": "info",
        "sitetitle": "Financial Freedom",
        "siteslogan": "Building success together",
        "sitelanguage": "English",
        "contact_details": "7 Bahnhofstrasse, Zurich, Switzerland",
        "sector_activity": "Financial services",
        "target_audience": "Young professionals",
        "mission": "Financial independence for everyone",
        "vision": "To make a global impact",
        "core_values": "Integrity, Innovation, Sustainability",
        "style_preference": "Elegant and luxurious",
        "colors": [
            "#041562 (Navy Blue)",
            "#2E4374 (Deep Blue)",
            "#D4AF37 (Luxury Gold)",
            "#F5F5F5 (Off White)",
            "#EFEFEF (Light Gray)"
        ],
        "typography": "Corporate elegance: Montserrat for headings and Roboto for body text",
        "button_style": "Sharp buttons with a subtle 3D-like effect and a slight sheen",
        "tone_of_voice": "Formal and authoritative"
    },
    "restaurant_food": {
        "name": "Restaurant & Food",
        "color": "danger",
        "sitetitle": "The Palate",
        "siteslogan": "Where every meal tells a story",
        "sitelanguage": "English",
        "contact_details": "20 Viale Roma, Rome, Italy",
        "sector_activity": "Tourism & Hospitality",
        "target_audience": "Local communities",
        "mission": "To provide unforgettable experiences",
        "vision": "To create a platform for connection",
        "core_values": "Quality, Service, Accessibility",
        "style_preference": "Cozy and warm",
        "colors": [
            "#C7253E (Wine Red)",
            "#E85C0D (Burnt Orange)",
            "#FABC3F (Golden Yellow)",
            "#821131 (Deep Burgundy)",
            "#FFF8E8 (Cream)"
        ],
        "typography": "Classic elegance: Playfair Display for headings and Source Sans 3 for body text",
        "button_style": "Buttons with icons, rounded corners, and a light shadow",
        "tone_of_voice": "Friendly and professional"
    },
    "education_online": {
        "name": "Online Education",
        "color": "secondary",
        "sitetitle": "Education Online",
        "siteslogan": "Discover, learn, grow",
        "sitelanguage": "English",
        "contact_details": "123 Main St, New York, USA",
        "sector_activity": "Education",
        "target_audience": "Students",
        "mission": "To democratize access to knowledge",
        "vision": "A culture of lifelong learning",
        "core_values": "Openness, Curiosity, Eagerness to learn",
        "style_preference": "Clean and functional",
        "colors": [
            "#3085C3 (Education Blue)",
            "#5AB2FF (Light Blue)",
            "#FFF455 (Bright Yellow)",
            "#A0E9FF (Sky Blue)",
            "#FFFFFF (Pure White)"
        ],
        "typography": "Clear and readable: Outfit for headings and Open Sans for body text",
        "button_style": "Flat design with a slight background change on hover",
        "tone_of_voice": "Inspiring and motivating"
    },
    "eco_sustainability": {
        "name": "Eco & Sustainability",
        "color": "success",
        "sitetitle": "Green Footprint",
        "siteslogan": "Your partner in growth",
        "sitelanguage": "English",
        "contact_details": "10 Grote Markt, Bruges, Belgium",
        "sector_activity": "Energy",
        "target_audience": "Families with children",
        "mission": "To leave a healthy planet",
        "vision": "To make all homes sustainable",
        "core_values": "Sustainability, Innovation, Inclusivity",
        "style_preference": "Organic and natural",
        "colors": [
            "#87A922 (Olive Green)",
            "#FCDC2A (Sunflower Yellow)",
            "#03C988 (Emerald Green)",
            "#B4E380 (Light Lime)",
            "#F8F9D7 (Natural White)"
        ],
        "typography": "Organic and warm: Comfortaa for headings and Lato for body text",
        "button_style": "Rounded corners with a natural 'pulse' effect on hover",
        "tone_of_voice": "Inspiring and motivating"
    },
    "travel_adventure": {
        "name": "Travel & Adventure",
        "color": "info",
        "sitetitle": "The World Discovered",
        "siteslogan": "Your compass for unforgettable journeys",
        "sitelanguage": "English",
        "contact_details": "500 Avenida Paulista, São Paulo, Brazil",
        "sector_activity": "Tourism & Hospitality",
        "target_audience": "Travelers",
        "mission": "To provide unforgettable experiences",
        "vision": "A world without borders for communication",
        "core_values": "Openness, Curiosity, Eagerness to learn",
        "style_preference": "Playful and dynamic",
        "colors": [
            "#FF6500 (Sunset Orange)",
            "#1E3E62 (Ocean Blue)",
            "#FF8A08 (Amber)",
            "#0B192C (Night Sky)",
            "#FFF5E4 (Sandy Cream)"
        ],
        "typography": "Adventurous: Russo One for headings and Nunito Sans for body text",
        "button_style": "Large, eye-catching buttons with a playful shadow on hover",
        "tone_of_voice": "Playful and informal"
    },
    "fitness_sports": {
        "name": "Fitness & Sports",
        "color": "danger",
        "sitetitle": "Peak Performance",
        "siteslogan": "Unleash your inner champion",
        "sitelanguage": "English",
        "contact_details": "45 Olympic Boulevard, Los Angeles, USA",
        "sector_activity": "Sports & Recreation",
        "target_audience": "Athletes and fitness enthusiasts",
        "mission": "To inspire people to reach their physical potential",
        "vision": "A world where everyone leads an active lifestyle",
        "core_values": "Discipline, Excellence, Perseverance",
        "style_preference": "Bold and energetic",
        "colors": [
            "#DC2626 (Intense Red)",
            "#1F2937 (Charcoal Black)",
            "#F3F4F6 (Light Gray)",
            "#F59E0B (Energetic Orange)",
            "#FFFFFF (Pure White)"
        ],
        "typography": "Strong and bold: Oswald for headings and Roboto for body text",
        "button_style": "Bold rectangular buttons with strong borders and hover animations",
        "tone_of_voice": "Motivational and energetic"
    },
    "luxury_fashion": {
        "name": "Luxury Fashion",
        "color": "dark",
        "sitetitle": "Élégance Couture",
        "siteslogan": "Where sophistication meets style",
        "sitelanguage": "English",
        "contact_details": "33 Avenue Montaigne, Paris, France",
        "sector_activity": "Fashion & Retail",
        "target_audience": "High-end fashion consumers",
        "mission": "To define timeless elegance and luxury",
        "vision": "To be the pinnacle of fashion excellence",
        "core_values": "Craftsmanship, Exclusivity, Heritage",
        "style_preference": "Sophisticated and minimal",
        "colors": [
            "#000000 (Pure Black)",
            "#D4AF37 (Luxury Gold)",
            "#FFFFFF (Pristine White)",
            "#8B7355 (Champagne Taupe)",
            "#F5F5F5 (Pearl White)"
        ],
        "typography": "Luxurious: Cormorant Garamond for headings and Raleway for body text",
        "button_style": "Minimal buttons with elegant borders and subtle gold accents",
        "tone_of_voice": "Sophisticated and exclusive"
    },
    "real_estate": {
        "name": "Real Estate",
        "color": "info",
        "sitetitle": "Dream Properties",
        "siteslogan": "Your home, your future",
        "sitelanguage": "English",
        "contact_details": "200 Park Avenue, New York, USA",
        "sector_activity": "Real Estate",
        "target_audience": "Homebuyers and investors",
        "mission": "To help people find their perfect home",
        "vision": "Making homeownership accessible to all",
        "core_values": "Trust, Transparency, Excellence",
        "style_preference": "Professional and trustworthy",
        "colors": [
            "#1E40AF (Professional Blue)",
            "#065F46 (Deep Green)",
            "#F9FAFB (Clean White)",
            "#6B7280 (Neutral Gray)",
            "#DBEAFE (Light Blue)"
        ],
        "typography": "Trustworthy: Montserrat for headings and Source Sans 3 for body text",
        "button_style": "Clean, professional buttons with subtle shadows",
        "tone_of_voice": "Professional and trustworthy"
    },
    "coffee_cafe": {
        "name": "Coffee & Café",
        "color": "warning",
        "sitetitle": "The Coffee Corner",
        "siteslogan": "Where every cup tells a story",
        "sitelanguage": "English",
        "contact_details": "78 Coffee Street, Seattle, USA",
        "sector_activity": "Food & Beverage",
        "target_audience": "Coffee enthusiasts",
        "mission": "To create the perfect coffee experience",
        "vision": "Bringing communities together through great coffee",
        "core_values": "Quality, Community, Passion",
        "style_preference": "Cozy and artisanal",
        "colors": [
            "#92400E (Rich Coffee Brown)",
            "#FEF3C7 (Cream)",
            "#451A03 (Dark Roast)",
            "#F59E0B (Golden Honey)",
            "#FEF7CD (Vanilla)"
        ],
        "typography": "Warm and inviting: Josefin Sans for headings and Merriweather for body text",
        "button_style": "Rounded buttons with coffee-inspired textures and warm hover effects",
        "tone_of_voice": "Warm and welcoming"
    },
    "gaming_esports": {
        "name": "Gaming & Esports",
        "color": "secondary",
        "sitetitle": "GameZone Elite",
        "siteslogan": "Level up your game",
        "sitelanguage": "English",
        "contact_details": "88 Gaming Boulevard, Tokyo, Japan",
        "sector_activity": "Gaming & Entertainment",
        "target_audience": "Gamers and esports fans",
        "mission": "To elevate the gaming experience",
        "vision": "Making gaming accessible and competitive for everyone",
        "core_values": "Innovation, Competition, Community",
        "style_preference": "Futuristic and dynamic",
        "colors": [
            "#7C3AED (Electric Purple)",
            "#06FFA5 (Neon Green)",
            "#1F2937 (Dark Gray)",
            "#F59E0B (Gaming Gold)",
            "#0F172A (Deep Black)"
        ],
        "typography": "Futuristic: Orbitron for headings and Exo 2 for body text",
        "button_style": "Futuristic buttons with neon glow effects and animated borders",
        "tone_of_voice": "Energetic and competitive"
    },
    "photography_studio": {
        "name": "Photography Studio",
        "color": "dark",
        "sitetitle": "Captured Moments",
        "siteslogan": "Every moment is a masterpiece",
        "sitelanguage": "English",
        "contact_details": "12 Art District, Barcelona, Spain",
        "sector_activity": "Creative Services",
        "target_audience": "Art lovers and clients seeking photography services",
        "mission": "To capture life's most precious moments",
        "vision": "Creating timeless visual stories",
        "core_values": "Artistry, Authenticity, Excellence",
        "style_preference": "Artistic and minimal",
        "colors": [
            "#111827 (Deep Black)",
            "#F3F4F6 (Soft White)",
            "#6B7280 (Medium Gray)",
            "#D97706 (Warm Accent Orange)",
            "#E5E7EB (Silver Gray)"
        ],
        "typography": "Artistic: EB Garamond for headings and Inter for body text",
        "button_style": "Minimal buttons with subtle animations and artistic hover effects",
        "tone_of_voice": "Artistic and passionate"
    },
    "yoga_meditation": {
        "name": "Yoga & Meditation",
        "color": "success",
        "sitetitle": "Serenity Space",
        "siteslogan": "Find your inner peace",
        "sitelanguage": "English",
        "contact_details": "108 Zen Garden Way, Ubud, Bali",
        "sector_activity": "Wellness & Spirituality",
        "target_audience": "Mindfulness seekers",
        "mission": "To guide people toward inner peace and wellness",
        "vision": "A world where everyone finds balance within",
        "core_values": "Mindfulness, Peace, Balance",
        "style_preference": "Peaceful and zen",
        "colors": [
            "#E0E7FF (Lavender Light)",
            "#8B5CF6 (Peaceful Purple)",
            "#F0FDF4 (Soft Green White)",
            "#059669 (Nature Green)",
            "#FAF5FF (Zen White)"
        ],
        "typography": "Calming: Poppins for headings and Hind for body text",
        "button_style": "Soft, rounded buttons with gentle transitions and calming effects",
        "tone_of_voice": "Peaceful and nurturing"
    },
    "crypto_blockchain": {
        "name": "Crypto & Blockchain",
        "color": "warning",
        "sitetitle": "CryptoVerse",
        "siteslogan": "Decentralizing the future",
        "sitelanguage": "English",
        "contact_details": "99 Blockchain Avenue, Singapore",
        "sector_activity": "Cryptocurrency & Technology",
        "target_audience": "Crypto traders and blockchain enthusiasts",
        "mission": "To democratize access to cryptocurrency",
        "vision": "A decentralized financial future for all",
        "core_values": "Innovation, Decentralization, Security",
        "style_preference": "Modern tech and futuristic",
        "colors": [
            "#F59E0B (Bitcoin Orange)",
            "#1F2937 (Dark Gray)",
            "#10B981 (Ethereum Green)",
            "#3B82F6 (Tech Blue)",
            "#111827 (Deep Black)"
        ],
        "typography": "Tech-forward: Rajdhani for headings and Space Grotesk for body text",
        "button_style": "Tech-inspired buttons with gradient backgrounds and crypto-themed animations",
        "tone_of_voice": "Technical and innovative"
    },
    "pet_services": {
        "name": "Pet Services",
        "color": "success",
        "sitetitle": "Paws & Care",
        "siteslogan": "Because your pets deserve the best",
        "sitelanguage": "English",
        "contact_details": "456 Pet Park Lane, Austin, USA",
        "sector_activity": "Pet Care Services",
        "target_audience": "Pet owners",
        "mission": "To provide exceptional care for beloved pets",
        "vision": "Happy, healthy pets in every home",
        "core_values": "Compassion, Care, Trust",
        "style_preference": "Friendly and colorful",
        "colors": [
            "#F97316 (Playful Orange)",
            "#0891B2 (Sky Blue)",
            "#FEF3C7 (Warm Cream)",
            "#16A34A (Nature Green)",
            "#FEF7CD (Soft Yellow)"
        ],
        "typography": "Friendly: Fredoka for headings and Nunito for body text",
        "button_style": "Playful, rounded buttons with pet-themed icons and bouncy hover effects",
        "tone_of_voice": "Caring and playful"
    },
    "music_studio": {
        "name": "Music Studio",
        "color": "secondary",
        "sitetitle": "Sound Waves Studio",
        "siteslogan": "Where music comes alive",
        "sitelanguage": "English",
        "contact_details": "21 Music Row, Nashville, USA",
        "sector_activity": "Music & Audio Production",
        "target_audience": "Musicians and audio professionals",
        "mission": "To create exceptional musical experiences",
        "vision": "Bringing artists' visions to life through sound",
        "core_values": "Creativity, Quality, Collaboration",
        "style_preference": "Modern and artistic",
        "colors": [
            "#7C2D12 (Deep Brown)",
            "#F59E0B (Golden Yellow)",
            "#1F2937 (Charcoal Gray)",
            "#EF4444 (Vibrant Red)",
            "#FEF3C7 (Warm White)"
        ],
        "typography": "Musical: Righteous for headings and Barlow for body text",
        "button_style": "Music-inspired buttons with wave animations and sound-themed hover effects",
        "tone_of_voice": "Creative and passionate"
    },
    "bakery": {
        "name": "Bakery",
        "color": "warning",
        "sitetitle": "Sweet Crumbs Bakery",
        "siteslogan": "Freshly Baked Happiness Daily",
        "sitelanguage": "English",
        "contact_details": "21 Music Row, Nashville, USA",
        "sector_activity": "Bakery, Pastry, Cafe",
        "target_audience": "Local community, Families, Food lovers",
        "mission": "To serve delightful freshly baked goods that bring joy and comfort.",
        "vision": "To be the neighborhood's favorite bakery known for quality and warmth.",
        "core_values": "Freshness, Quality ingredients, Community, Sustainability",
        "style_preference": "Rustic, Warm, Inviting",
        "colors": [
            "#F9A825 (Warm Yellow)",
            "#EF6C00 (Burnt Orange)",
            "#FFD54F (Golden Honey)",
            "#F57C00 (Pumpkin)",
            "#6D4C41 (Rich Brown)"
        ],
        "typography": "Cozy and artisan: Pacifico for headings and Cabin for body text",
        "button_style": "Rounded, Soft Shadows",
        "tone_of_voice": "Friendly, Warm, Inviting"
    },
    "musicband": {
        "name": "Music Band",
        "color": "danger",
        "sitetitle": "EchoVibes Band",
        "siteslogan": "Feel the Rhythm, Live the Moment",
        "sitelanguage": "English",
        "contact_details": "contact@echovibesband.com - +987 654 3210",
        "sector_activity": "Music, Live Performance, Entertainment",
        "target_audience": "Music fans, Concert goers, Event organizers",
        "mission": "To create unforgettable live music experiences that inspire and unite.",
        "vision": "To be the sound that resonates across generations and stages.",
        "core_values": "Creativity, Passion, Connect with fans, Energy",
        "style_preference": "Edgy, Modern, Dynamic",
        "colors": [
            "#1F2937 (Charcoal Black)",
            "#E74C3C (Passionate Red)",
            "#34495E (Steel Blue)",
            "#9B59B6 (Vibrant Purple)",
            "#F1C40F (Electric Yellow)"
        ],
        "typography": "Rock inspired: Permanent Marker for headings and Ubuntu for body text",
        "button_style": "Sharp edges, High contrast",
        "tone_of_voice": "Energetic, Passionate, Engaging"
    },
    "wedding_events": {
        "name": "Wedding & Events",
        "color": "info",
        "sitetitle": "Eternal Moments",
        "siteslogan": "Creating memories that last forever",
        "sitelanguage": "English",
        "contact_details": "15 Romance Avenue, Venice, Italy",
        "sector_activity": "Event Planning & Wedding Services",
        "target_audience": "Couples and event planners",
        "mission": "To create unforgettable celebrations",
        "vision": "Making every moment magical",
        "core_values": "Romance, Elegance, Perfection",
        "style_preference": "Romantic and elegant",
        "colors": [
            "#FDF2F8 (Soft Pink)",
            "#EC4899 (Rose Pink)",
            "#F3E8FF (Lavender Light)",
            "#D4AF37 (Elegant Gold)",
            "#FEFCE8 (Champagne)"
        ],
        "typography": "Romantic: Great Vibes for headings and Lora for body text",
        "button_style": "Elegant buttons with romantic gradients and delicate hover animations",
        "tone_of_voice": "Romantic and elegant"
    }
};

        function populateSuggestionsAndBadges() {
            const suggestionSelects = document.querySelectorAll('.suggestion-select');
            const themeBadgesContainer = document.getElementById('theme-badges');
            themeBadgesContainer.innerHTML = '';

            // Helper function to collect unique suggestions from all themes for a field
            function collectUniqueSortedSuggestions(fieldId) {
                const allValues = new Set();
                for (const themeKey in thematicClusters) {
                    const theme = thematicClusters[themeKey];
                    if (theme.hasOwnProperty(fieldId)) {
                        let val = theme[fieldId];
                        if (fieldId === 'colors' && Array.isArray(val)) {
                            // For colors, join the array into a complete palette string
                            allValues.add(val.join(', '));
                        } else if (Array.isArray(val)) {
                            val.forEach(v => allValues.add(v));
                        } else if (val) {
                            allValues.add(val);
                        }
                    }
                }
                return Array.from(allValues).sort((a, b) => a.localeCompare(b));
            }

            // Populate suggestion selects with unique sorted suggestions
            suggestionSelects.forEach(select => {
    // Vind de input door eerst naar de parent '.input-group' te gaan
    // en dan daarbinnen de input te zoeken.
    const input = select.closest('.input-group').querySelector('input');

    if (!input || !input.id) return;
    const fieldId = input.id;

    // Verwijder oude suggesties (alles behalve de eerste 'Suggestion' optie)
    while (select.options.length > 1) {
        select.remove(1);
    }

    // Voeg de nieuwe, unieke en gesorteerde suggesties toe
    const uniqueSuggestions = collectUniqueSortedSuggestions(fieldId);
    uniqueSuggestions.forEach(sugg => {
        const option = document.createElement('option');
        option.value = sugg;
        option.textContent = sugg;
        select.appendChild(option);
    });
});

            // Create theme badges for quick selection
            for (const themeKey in thematicClusters) {
                const theme = thematicClusters[themeKey];
                const badge = document.createElement('span');
                badge.className = `badge bg-${theme.color} theme-badge btn`;
                badge.textContent = theme.name;
                badge.onclick = () => applyTheme(themeKey);
                themeBadgesContainer.appendChild(badge);
            }
        }

        document.addEventListener('DOMContentLoaded', populateSuggestionsAndBadges);

        function getFormData() {
            const data = {};
            const formElements = document.querySelectorAll('#prompt-form .form-input');
            formElements.forEach(input => {
                data[input.id] = input.value;
            });
            return data;
        }

        function updateJsonOutput() {
            const formData = getFormData();
            const clonedTemplate = JSON.parse(JSON.stringify(jsonTemplate));

            function replacePlaceholders(obj) {
                for (const key in obj) {
                    if (typeof obj[key] === 'string') {
                        let value = formData[key];
                        if (key === 'colors' && Array.isArray(value)) {
                            value = value.join(', ');
                        }
                        if (value) {
                            const placeholder = `[${key.toUpperCase()}]`;
                            obj[key] = obj[key].replace(placeholder, value);
                        }
                    } else if (typeof obj[key] === 'object' && obj[key] !== null) {
                        replacePlaceholders(obj[key]);
                    }
                }
            }

            replacePlaceholders(clonedTemplate);

            const cleanTemplate = JSON.parse(JSON.stringify(clonedTemplate, (key, value) => {
                if (Array.isArray(value) && value.length === 0) return undefined;
                if (typeof value === 'object' && value !== null && Object.keys(value).length === 0) return undefined;
                if (typeof value === 'string' && value.startsWith('[') && value.endsWith(']')) return undefined;
                return value;
            }, 2));

            document.getElementById('json-output').value = JSON.stringify(cleanTemplate, null, 2);
        }

        function applyTheme(themeKey) {
            const theme = thematicClusters[themeKey];
            if (!theme) return;

            document.getElementById('sitetitle').value = theme.sitetitle || '';
            document.getElementById('siteslogan').value = theme.siteslogan || '';
            document.getElementById('sitelanguage').value = theme.sitelanguage || '';
            document.getElementById('contact_details').value = theme.contact_details || '';
            document.getElementById('sector_activity').value = theme.sector_activity || '';
            document.getElementById('target_audience').value = theme.target_audience || '';
            document.getElementById('mission').value = theme.mission || '';
            document.getElementById('vision').value = theme.vision || '';
            document.getElementById('core_values').value = theme.core_values || '';
            document.getElementById('style_preference').value = theme.style_preference || '';
            document.getElementById('colors').value = Array.isArray(theme.colors) ? theme.colors.join(', ') : theme.colors || '';
            document.getElementById('typography').value = theme.typography || '';
            document.getElementById('button_style').value = theme.button_style || '';
            document.getElementById('tone_of_voice').value = theme.tone_of_voice || '';

            updateJsonOutput();
        }

        function generateRandomTheme() {
            const keys = Object.keys(thematicClusters);
            const randomKey = keys[Math.floor(Math.random() * keys.length)];
            applyTheme(randomKey);
        }

        function clearForm() {
            document.querySelectorAll('#prompt-form .form-input').forEach(input => input.value = '');
            updateJsonOutput();
            document.getElementById('ai-html-input').value = '';
        }

        function copyJson() {
            const output = document.getElementById('json-output');
            output.select();
            output.setSelectionRange(0, 99999);
            document.execCommand('copy');
            alert('JSON copied to clipboard! Paste this in your GenAI prompt!');
        }

        function exportJson() {
            const json = document.getElementById('json-output').value;
            const blob = new Blob([json], {
                type: 'application/json'
            });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'website_prompt.json';
            a.click();
            URL.revokeObjectURL(a.href);
        }

        document.getElementById('prompt-form').addEventListener('input', updateJsonOutput);
        document.getElementById('generate-random').addEventListener('click', generateRandomTheme);
        document.getElementById('clear-form').addEventListener('click', clearForm);
        document.getElementById('copy-json').addEventListener('click', copyJson);
        document.getElementById('export-json').addEventListener('click', exportJson);

        updateJsonOutput();

        const iframe = document.getElementById('preview-iframe');
        let currentBlobURL = null;

        document.getElementById('preview-btn').addEventListener('click', function() {
            const html = document.getElementById('ai-html-input').value.trim();
            if (!html) {
                alert('Please paste some HTML first.');
                return;
            }

            if (currentBlobURL) {
                URL.revokeObjectURL(currentBlobURL);
            }

            const blob = new Blob([html], {
                type: 'text/html'
            });
            currentBlobURL = URL.createObjectURL(blob);

            iframe.onload = () => {
                try {
                    const doc = iframe.contentDocument;
                    if (!doc) return;

                    const style = doc.createElement('style');
                    style.id = 'editable-style';
                    style.textContent = `
                        [contenteditable="true"]:hover { outline: 2px dashed #0d6efd; cursor: text; }
                        [contenteditable="true"]:focus { outline: 2px solid #0d6efd; background-color: rgba(13, 110, 253, 0.1); }
                    `;
                    doc.head.appendChild(style);

                    const selector = 'p, h1, h2, h3, h4, h5, h6, a, li, button, span, strong, strike, em, blockquote, figcaption, td, th, dd, div, small, body, address, i, b, s, label';
                    doc.querySelectorAll(selector).forEach(el => {
                        const childNodes = Array.from(el.childNodes);

                        childNodes.forEach(node => {
                            if (node.nodeType === Node.TEXT_NODE && node.textContent.trim().length > 0) {
                                const span = doc.createElement('span');
                                span.textContent = node.textContent;
                                span.contentEditable = true;
                                el.replaceChild(span, node);
                            }
                        });

                        // Prevent links and buttons from triggering navigation or actions while editing
                        doc.querySelectorAll('a, button').forEach(el => {
                            el.addEventListener('click', (event) => {
                                event.preventDefault();
                                event.stopPropagation();
                                // Optionally, put the focus in the editable child span if present
                                const editableSpan = el.querySelector('span[contenteditable="true"]');
                                if (editableSpan) {
                                    editableSpan.focus();
                                }
                            });
                        });
                    });
                } catch (e) {
                    console.error("Error making iframe content editable:", e);
                    alert("Could not make preview editable. See browser console for details.");
                }
            };

            iframe.src = currentBlobURL;
            new bootstrap.Modal(document.getElementById('previewModal')).show();
        });

        // Download logic for the original, unedited HTML
        document.getElementById('download-btn').addEventListener('click', function() {
            const html = document.getElementById('ai-html-input').value.trim();
            if (!html) {
                alert('Please paste some HTML first.');
                return;
            }
            const blob = new Blob([html], {
                type: 'text/html'
            });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'index.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        // Download logic for the MODIFIED HTML from the modal preview
        document.getElementById('download-edited-btn').addEventListener('click', function() {
            const doc = iframe.contentDocument;
            if (!doc) {
                alert('Could not access the preview content to download.');
                return;
            }

            const cloneDoc = doc.cloneNode(true);

            cloneDoc.getElementById('editable-style')?.remove();

            // In the clone, find our editable spans and unwrap them
            cloneDoc.querySelectorAll('span[contenteditable="true"]').forEach(span => {
                const textNode = document.createTextNode(span.textContent);
                span.parentNode.replaceChild(textNode, span);
            });

            const finalHtml = '<!DOCTYPE html>\n' + cloneDoc.documentElement.outerHTML;

            // Trigger the download
            const blob = new Blob([finalHtml], {
                type: 'text/html'
            });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'index_edited.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        // Clean up blob URL when the modal is closed
        document.getElementById('previewModal').addEventListener('hidden.bs.modal', () => {
            if (currentBlobURL) {
                URL.revokeObjectURL(currentBlobURL);
                currentBlobURL = null;
                iframe.removeAttribute('src');
            }
        });
   
        document.addEventListener('DOMContentLoaded', () => {
            const textarea = document.getElementById('ai-html-input');

            // Listen for the 'input' event, which fires when the value changes
            // through user interaction (typing, pasting, etc.)
            textarea.addEventListener('input', cleanupHtml);
        });

        function cleanupHtml(event) {
            const textarea = event.target;
            const originalContent = textarea.value;

            // 1. Define the Regular Expression
            // /.../s: The pattern
            //   s: The 'dotall' flag, allowing '.' to match newline characters.
            // (<!doctype[^>]*>): Capture Group 1 (The DOCTYPE declaration)
            //   [^>]*: matches any character except '>', zero or more times.
            // ([\s\S]*?): Capture Group 2 (The HTML content between DOCTYPE and </html>)
            //   [\s\S]*?: matches any character (including whitespace), non-greedily.
            // (<\/html>): Capture Group 3 (The closing </html> tag)
            const htmlRegex = /(<!doctype[^>]*>)([\s\S]*?)(<\/html>)/si;

            // 2. Execute the Regex on the content
            const match = originalContent.match(htmlRegex);

            if (match) {
                // If a match is found, the extracted clean content is the concatenation
                // of the captured groups: match[1] (doctype) + match[2] (content) + match[3] (</html>)
                const cleanHtml = match[1] + match[2] + match[3];

                // 3. Update the textarea only if the content has changed
                if (originalContent !== cleanHtml) {
                    // Save the current cursor position to restore it later
                    const selectionStart = textarea.selectionStart;
                    const selectionEnd = textarea.selectionEnd;

                    textarea.value = cleanHtml;

                    // Restore the cursor position
                    textarea.selectionStart = selectionStart;
                    textarea.selectionEnd = selectionEnd;
                }
            } else {
                // Optional: Clear the textarea if a valid structure isn't found
                // (i.e., if it's missing <!doctype> or </html>)
                // textarea.value = '';
                // console.log('Invalid HTML structure found. Clearing content.');
            }
        }
    </script>
</body>
</html>


